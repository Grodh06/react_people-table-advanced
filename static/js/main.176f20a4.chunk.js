(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{20:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var s=c(13),a=c.n(s),n=c(4),l=(c(20),c(21),c(2)),r=c(1),i=c(0),j=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{className:"title has-text-centered is-uppercase",children:"Page not found"})})},o=c(10),d=c(8),b=c(3),u=c(14),h=c(12),m=c.n(h),O=function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){return Math.ceil(e.born/100)},f=function(e){var t=e.people,c=e.addPerson,s=Object(r.useState)(""),a=Object(b.a)(s,2),n=a[0],l=a[1],j=Object(r.useState)(""),o=Object(b.a)(j,2),d=o[0],u=o[1],h=Object(r.useState)("m"),m=Object(b.a)(h,2),O=m[0],x=m[1],f=Object(r.useState)(""),p=Object(b.a)(f,2),v=p[0],N=p[1],g=Object(r.useState)(""),w=Object(b.a)(g,2),y=w[0],S=w[1],C=Object(r.useState)(""),F=Object(b.a)(C,2),k=F[0],A=F[1],L=Object(r.useState)(""),P=Object(b.a)(L,2),D=P[0],M=P[1];function _(){c({name:n,sex:O,born:+v,died:+y,fatherName:k,motherName:D,father:t.find((function(e){return e.name===k}))||null,mother:t.find((function(e){return e.name===D}))||null,slug:"".concat(n.toLowerCase(),"-").concat(d.toLowerCase,"-").concat(v)}),l(""),u(""),x("m"),N(""),S(""),A(""),M("")}return Object(i.jsx)("div",{className:"column is-one-fifths",children:Object(i.jsxs)("div",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Add Person(no field check!)"}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)("p",{className:"control",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_()},children:[Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",htmlFor:"nameField",children:"Name"}),Object(i.jsx)("div",{className:"control",id:"nameField",children:Object(i.jsx)("input",{className:"input",type:"text",placeholder:"Name",value:n,onChange:function(e){return l(e.target.value)}})})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",htmlFor:"lastNameField",children:"Last name"}),Object(i.jsx)("div",{className:"control",id:"lastNameField",children:Object(i.jsx)("input",{className:"input",type:"text",placeholder:"Last name",value:d,onChange:function(e){return u(e.target.value)}})})]}),Object(i.jsxs)("div",{className:"control",children:[Object(i.jsxs)("label",{className:"radio",children:[Object(i.jsx)("input",{type:"radio",name:"sex",value:"m",checked:"m"===O,onChange:function(e){return x(e.target.value)}}),"Male"]}),Object(i.jsxs)("label",{className:"radio",children:[Object(i.jsx)("input",{type:"radio",name:"sex",value:"f",checked:"f"===O,onChange:function(e){return x(e.target.value)}}),"Female"]})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",htmlFor:"bornField",children:"Born"}),Object(i.jsx)("div",{className:"control",id:"bornField",children:Object(i.jsx)("input",{className:"input",type:"text",placeholder:"Born",value:v,onChange:function(e){return N(e.target.value)}})})]}),Object(i.jsxs)("div",{className:"field",children:[Object(i.jsx)("label",{className:"label",htmlFor:"diedField",children:"Died"}),Object(i.jsx)("div",{className:"control",id:"diedField",children:Object(i.jsx)("input",{className:"input",type:"text",placeholder:"Died",disabled:""===v,value:y,onChange:function(e){return S(e.target.value)}})})]}),Object(i.jsxs)("div",{className:"field",children:["Father",Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{value:k,onChange:function(e){return A(e.target.value)},children:[Object(i.jsx)("option",{value:"",disabled:!0,selected:!0,children:"choose father"}),t.filter((function(e){return"m"===e.sex})).map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})]}),Object(i.jsxs)("div",{className:"field",children:["Mother",Object(i.jsx)("div",{className:"select",children:Object(i.jsxs)("select",{value:D,onChange:function(e){return M(e.target.value)},children:[Object(i.jsx)("option",{value:"",disabled:!0,selected:!0,children:"choose mother"}),t.filter((function(e){return"f"===e.sex})).map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})]}),Object(i.jsx)("div",{className:"field is-grouped",children:Object(i.jsx)("div",{className:"control",children:Object(i.jsx)("button",{type:"submit",className:"button is-link",children:"Submit"})})})]})})})]})})},p=c(6),v=c.n(p),N=c(15);function g(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(b.a)(e,2),s=t[0],a=t[1];null===a?c.delete(s):Array.isArray(a)?(c.delete(s),a.forEach((function(e){c.append(s,e)}))):c.set(s,a)})),c.toString()}var w=["children","params"],y=function(e){var t=e.children,c=e.params,s=Object(N.a)(e,w),a=Object(n.d)(),l=Object(b.a)(a,1)[0];return Object(i.jsx)(n.b,Object(d.a)(Object(d.a)({to:{search:g(l,c)}},s),{},{children:t}))},S=function(e){var t=e.avalableCenturies,c=Object(n.d)(),s=Object(b.a)(c,1)[0].getAll("centuries");return Object(i.jsxs)(i.Fragment,{children:[t.map((function(e){return Object(i.jsx)(y,{className:v()("button","mr-1",{"is-info":s.includes(e)}),params:{centuries:s.includes(e)?s.filter((function(t){return t!==e})):[].concat(Object(o.a)(s),[e])},children:e},e)})),Object(i.jsx)(y,{className:v()("button is-info is-fullwidth",{"is-outlined":s.length>0}),params:{centuries:null},children:"All"})]})},C=function(){var e=Object(n.d)(),t=Object(b.a)(e,2),c=t[0],s=t[1],a=c.get("query")||"";return Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("p",{className:"control has-icons-left",children:[Object(i.jsx)("input",{className:"input",type:"text",placeholder:"Search",value:a,onChange:function(e){return s(g(c,{query:e.target.value||null}))}}),Object(i.jsx)("span",{className:"icon is-left",children:Object(i.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})})},F=function(){var e=Object(n.d)(),t=Object(b.a)(e,1)[0].get("sex");return Object(i.jsxs)("p",{className:"panel-tabs",children:[Object(i.jsx)(y,{params:{sex:null},className:v()({"is-active":!t}),children:"All"}),Object(i.jsx)(y,{params:{sex:"m"},className:v()({"is-active":"m"===t}),children:"Male"}),Object(i.jsx)(y,{params:{sex:"f"},className:v()({"is-active":"f"===t}),children:"Female"})]})},k=function(e){var t=e.avalableCenturies;return Object(i.jsx)("div",{className:"column is-one-fifths",children:Object(i.jsx)("div",{className:"level",children:Object(i.jsxs)("div",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(i.jsx)(C,{}),Object(i.jsx)(F,{}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)(S,{avalableCenturies:t})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)(n.b,{className:"button is-link is-outlined is-fullwidth",to:"/people",children:"Reset all filters"})})]})})})},A=(c(24),function(){return Object(i.jsx)("div",{className:"Loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),L=function(e){var t=e.field,c=Object(n.d)(),s=Object(b.a)(c,1)[0],a=s.get("sort")||"",l="desc"===s.get("order"),r={sort:t===a&&l?null:t,order:t!==a||l?null:"desc"};return Object(i.jsx)(y,{params:r,children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:v()("fas",{"fa-sort":a!==t,"fa-sort-up":a===t&&!l,"fa-sort-down":a===t&&l})})})})},P=function(e){var t=e.person;return Object(i.jsx)(n.b,{to:"/people/".concat(t.slug),style:"m"===t.sex?{color:"rgb(0, 71, 171)"}:{color:"rgb(255, 0, 0)"},children:t.name})},D=function(e){var t=e.person,c=Object(l.h)().slug;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("tr",{className:v()({"is-selected":c===t.slug}),children:[Object(i.jsx)("th",{children:Object(i.jsx)(P,{person:t})}),Object(i.jsx)("th",{children:t.sex}),Object(i.jsx)("th",{children:t.born}),Object(i.jsx)("th",{children:t.died}),t.father?Object(i.jsx)("th",{children:Object(i.jsx)(P,{person:t.father})}):Object(i.jsx)("th",{children:t.fatherName}),t.mother?Object(i.jsx)("th",{children:Object(i.jsx)(P,{person:t.mother})}):Object(i.jsx)("th",{children:t.motherName})]})})},M=function(e){var t=e.people;return Object(i.jsx)("div",{className:"column is-two-thirds",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("table",{className:"table is-striped is-fullwidth",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{title:"Name",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(i.jsx)(L,{field:"name"})]})}),Object(i.jsx)("th",{title:"sex",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(i.jsx)(L,{field:"sex"})]})}),Object(i.jsx)("th",{title:"born",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(i.jsx)(L,{field:"born"})]})}),Object(i.jsx)("th",{title:"died",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(i.jsx)(L,{field:"died"})]})}),Object(i.jsx)("th",{title:"father",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Father",Object(i.jsx)(L,{field:"fatherName"})]})}),Object(i.jsx)("th",{title:"mother",children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Mother",Object(i.jsx)(L,{field:"motherName"})]})})]})}),Object(i.jsx)("tbody",{children:t.map((function(e){return Object(i.jsx)(D,{person:e},e.slug)}))})]})})})},_=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)([]),l=Object(b.a)(a,2),j=l[0],u=l[1],h=Object(n.d)(),m=Object(b.a)(h,1)[0],p=Object(r.useState)(!1),v=Object(b.a)(p,2),N=v[0],g=v[1],w=Object(r.useState)(!1),y=Object(b.a)(w,2),S=y[0],C=y[1],F=m.get("query"),L=m.get("sex"),P=m.getAll("centuries"),D=m.get("sort"),_="desc"===m.get("order");Object(r.useEffect)((function(){O().then((function(e){if(e){var t=e.map((function(t){var c=e.find((function(e){return t.fatherName===e.name}))||null,s=e.find((function(e){return t.motherName===e.name}))||null;return Object(d.a)(Object(d.a)({},t),{},{fatherName:t.fatherName||"--John Doe--",motherName:t.motherName||"--Jane Doe--",father:c,mother:s})})),c=Array.from(new Set(t.map((function(e){return x(e).toString()})).sort()));u(c),s(t)}})).finally((function(){g(!0)}))}),[]);var B=Object(o.a)(c);if(L&&(B=B.filter((function(e){return e.sex===L}))),P.length>0&&(B=B.filter((function(e){return P.includes(x(e).toString())}))),F){var E=F.toLowerCase();B=B.filter((function(e){return[e.name,e.fatherName,e.motherName].join("\n").toLowerCase().includes(E)}))}return D&&(B.sort((function(e,t){switch(D){case"name":case"sex":case"fatherName":case"motherName":return e[D].localeCompare(t[D]);case"born":case"died":return e[D]-t[D];default:return 0}})),_&&B.reverse()),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{className:"title has-text-centered",children:"People"}),N?Object(i.jsx)("div",{className:"block",children:Object(i.jsxs)("div",{className:"columns",children:[Object(i.jsx)(M,{people:B}),Object(i.jsxs)("div",{children:[Object(i.jsx)(k,{avalableCenturies:j}),S?Object(i.jsx)(f,{people:c,addPerson:function(e){s((function(t){return t.some((function(t){return t.slug===e.slug}))?t:[].concat(Object(o.a)(t),[e])})),C(!1)}}):Object(i.jsx)("div",{className:"column is-one-fifths",children:Object(i.jsx)("div",{className:"panel",children:Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)("button",{type:"button",className:"button is-danger is-fullwidth",onClick:function(){return C(!0)},children:"Add person"})})})})]})]})}):Object(i.jsx)(A,{})]})},B=function(){return Object(i.jsxs)("nav",{className:"is-flex is-justify-content-space-evenly",children:[Object(i.jsx)(n.c,{to:"/",className:"navbar-item",children:"Home"}),Object(i.jsx)(n.c,{to:"people",className:"navbar-item",children:"People"})]})},E=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(B,{}),Object(i.jsx)("div",{className:"section",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)(l.d,{children:[Object(i.jsx)(l.b,{path:"/",element:Object(i.jsx)("h1",{className:"title level-item",children:"Home Page"})}),Object(i.jsx)(l.b,{path:"home",element:Object(i.jsx)(l.a,{to:"/"})}),Object(i.jsxs)(l.b,{path:"people",children:[Object(i.jsx)(l.b,{index:!0,element:Object(i.jsx)(_,{})}),Object(i.jsx)(l.b,{path:":slug",element:Object(i.jsx)(_,{})})]}),Object(i.jsx)(l.b,{path:"/*",element:Object(i.jsx)(j,{})})]})})})]})};a.a.render(Object(i.jsx)(n.a,{children:Object(i.jsx)(E,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.176f20a4.chunk.js.map